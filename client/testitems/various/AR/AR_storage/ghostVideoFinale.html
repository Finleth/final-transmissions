<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Finale Test</title>
    <link rel="stylesheet" type="text/css" href="ARstyle.css" />

    <script src="../../../assets/lib/aframe.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
</head>
<body style='margin : 0px; overflow: hidden;'>

<a-scene>
    <a-sky color="grey"></a-sky>
</a-scene>

<script>

    window.addEventListener("load", function () {
        createGhosts(5);
    });

    const findRange = (start, end) => {
        return (Math.random() * (end-start) ) + start;
    };



    const createGhosts = (amount) => {
        const scene = document.querySelector('a-scene');


        for (let creator=0; creator<amount; creator++){
            let entity = document.createElement('a-entity');
            let plane = document.createElement('a-plane');

            let animation1 = document.createElement('a-animation');
            let animation2 = document.createElement('a-animation');

            let posX = findRange(-7,7);
            let posXdest = findRange(-7,7);

            let dur = findRange(1000, 5000);

//            plane.setAttribute('src', './AR_assets/ghostsmokemd_59066.gif');



                plane.setAttribute('material', 'shader:gif;src:url(./AR_Assets/ghost-smoke.gif)');
////                plane.setAttribute('gif', '');
                plane.play();

            plane.setAttribute('opacity', '1');

            plane.setAttribute('height', '2');
            plane.setAttribute('width', '4');
            plane.setAttribute('material', '','rgba(255, 255, 255, 0)');

            animation1.setAttribute('attribute', 'position');
            animation1.setAttribute('dur', dur);
            animation1.setAttribute('from', '0' + ' ' + '0.5' + ' -5');
            animation1.setAttribute('to', posXdest + ' ' + '5' + ' -5');
            animation1.setAttribute('easing', 'linear');
            animation1.setAttribute('repeat', 'indefinite');

//
            animation2.setAttribute('attribute', 'opacity');
            animation2.setAttribute('dur', dur);
            animation2.setAttribute('from', '1');
            animation2.setAttribute('to', '0');
            animation2.setAttribute('easing', 'linear');
            animation2.setAttribute('repeat', 'indefinite');



            entity.appendChild(animation1);
            plane.appendChild(animation2);
            entity.appendChild(plane);
            scene.appendChild(entity);



        }
    }




</script>

</body>
